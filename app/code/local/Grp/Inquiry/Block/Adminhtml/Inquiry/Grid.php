<?php/** * Grp_Inquiry extension *  * NOTICE OF LICENSE *  * This source file is subject to the MIT License * that is bundled with this package in the file LICENSE.txt. * It is also available through the world-wide-web at this URL: * http://opensource.org/licenses/mit-license.php *  * @category       Grp * @package        Grp_Inquiry * @copyright      Copyright (c) 2014 * @license        http://opensource.org/licenses/mit-license.php MIT License *//** * Inquiry admin grid block * * @category    Grp * @package     Grp_Inquiry * @author      Grapes-solutions.com */class Grp_Inquiry_Block_Adminhtml_Inquiry_Grid    extends Mage_Adminhtml_Block_Widget_Grid {    /**     * constructor     * @access public     * @author Grapes-solutions.com     */    public function __construct(){        parent::__construct();        $this->setId('inquiryGrid');        $this->setDefaultSort('entity_id');        $this->setDefaultDir('ASC');        $this->setSaveParametersInSession(true);        $this->setUseAjax(true);    }    /**     * prepare collection     * @access protected     * @return Grp_Inquiry_Block_Adminhtml_Inquiry_Grid     * @author Grapes-solutions.com     */    protected function _prepareCollection(){        $collection = Mage::getModel('grp_inquiry/inquiry')->getCollection();                $this->setCollection($collection);        $this->setDefaultSort('entity_id');        $this->setDefaultDir('Desc');        return parent::_prepareCollection();    }    /**     * prepare grid collection     * @access protected     * @return Grp_Inquiry_Block_Adminhtml_Inquiry_Grid     * @author Grapes-solutions.com     */    protected function _prepareColumns(){                $this->addColumn('entity_id', array(            'header'    => Mage::helper('grp_inquiry')->__('Id'),            'index'        => 'entity_id',            'type'        => 'number',            'sort'          => 'desc'        ));        $this->addColumn('inquiries', array(            'header'        => Mage::helper('grp_inquiry')->__('Article'),            'index'         => 'inquiries',                    ));        $this->addColumn('first_name', array(            'header'    => Mage::helper('grp_inquiry')->__('First Name'),            'align'     => 'left',            'index'     => 'first_name',        ));         $this->addColumn('last_name', array(            'header'    => Mage::helper('grp_inquiry')->__('Last Name'),            'align'     => 'left',            'index'     => 'last_name',        ));         $this->addColumn('email', array(            'header'    => Mage::helper('grp_inquiry')->__('Email'),            'align'     => 'left',            'index'     => 'email',        ));         $this->addColumn('phone', array(            'header'    => Mage::helper('grp_inquiry')->__('Phone'),            'align'     => 'left',            'index'     => 'phone',        ));                  $this->addColumn('created_at', array(            'header'        => Mage::helper('grp_inquiry')->__('Created at'),            'index'         => 'created_at',            'width'         => '120px',            'type'          => 'datetime',            'filter_index'  => 'created_at',        ));         //        $this->addColumn('action',//            array(//                'header'=>  Mage::helper('grp_inquiry')->__('Action'),//                'width' => '100',//                'type'  => 'action',//                'getter'=> 'getId',//                'actions'   => array(//                    array(//                        'caption'   => Mage::helper('grp_inquiry')->__('View'),//                        'url'   => array('base'=> '*/*/view'),//                        'field' => 'id'//                    )//                ),//                'filter'=> false,//                'is_system'    => true,//                'sortable'  => false,//        ));//        $this->addExportType('*/*/exportCsv', Mage::helper('grp_inquiry')->__('CSV'));//        $this->addExportType('*/*/exportExcel', Mage::helper('grp_inquiry')->__('Excel'));//        $this->addExportType('*/*/exportXml', Mage::helper('grp_inquiry')->__('XML'));        return parent::_prepareColumns();    }    /**     * prepare mass action     * @access protected     * @return Grp_Inquiry_Block_Adminhtml_Inquiry_Grid     * @author Grapes-solutions.com     */    protected function _prepareMassaction(){        $this->setMassactionIdField('entity_id');       $this->getMassactionBlock()->setFormFieldName('inquiry');        $this->getMassactionBlock()->addItem('delete', array(            'label'=> Mage::helper('grp_inquiry')->__('Delete'),            'url'  => $this->getUrl('*/*/massDelete'),            'confirm'  => Mage::helper('grp_inquiry')->__('Are you sure?')        ));//        $this->getMassactionBlock()->addItem('status', array(//            'label'=> Mage::helper('grp_inquiry')->__('Change status'),//            'url'  => $this->getUrl('*/*/massStatus', array('_current'=>true)),//            'additional' => array(//                'status' => array(//                        'name' => 'status',//                        'type' => 'select',//                        'class' => 'required-entry',//                        'label' => Mage::helper('grp_inquiry')->__('Status'),//                        'values' => array(//                                '1' => Mage::helper('grp_inquiry')->__('Enabled'),//                                '0' => Mage::helper('grp_inquiry')->__('Disabled'),//                        )//                )//            )//        ));//        $this->getMassactionBlock()->addItem('inquiry', array(//            'label'=> Mage::helper('grp_inquiry')->__('Change Send inquiry?'),//            'url'  => $this->getUrl('*/*/massInquiry', array('_current'=>true)),//            'additional' => array(//                'flag_inquiry' => array(//                        'name' => 'flag_inquiry',//                        'type' => 'select',//                        'class' => 'required-entry',//                        'label' => Mage::helper('grp_inquiry')->__('Send inquiry?'),//                        'values' => array(//                                '1' => Mage::helper('grp_inquiry')->__('Yes'),//                                '0' => Mage::helper('grp_inquiry')->__('No'),//                            )////                )//            )//        ));        return $this;    }    /**     * get the row url     * @access public     * @param Grp_Inquiry_Model_Inquiry     * @return string     * @author Grapes-solutions.com     */    public function getRowUrl($row){        return $this->getUrl('*/*/edit', array('id' => $row->getId()));    }    /**     * get the grid url     * @access public     * @return string     * @author Grapes-solutions.com     */    public function getGridUrl(){        return $this->getUrl('*/*/grid', array('_current'=>true));    }    /**     * after collection load     * @access protected     * @return Grp_Inquiry_Block_Adminhtml_Inquiry_Grid     * @author Grapes-solutions.com     */    protected function _afterLoadCollection(){        $this->getCollection()->walk('afterLoad');        parent::_afterLoadCollection();    }    /**     * filter store column     * @access protected     * @param Grp_Inquiry_Model_Resource_Inquiry_Collection $collection     * @param Mage_Adminhtml_Block_Widget_Grid_Column $column     * @return Grp_Inquiry_Block_Adminhtml_Inquiry_Grid     * @author Grapes-solutions.com     */    protected function _filterStoreCondition($collection, $column){        if (!$value = $column->getFilter()->getValue()) {            return;        }        $collection->addStoreFilter($value);        return $this;    }}